@model IEnumerable<OECS.Models.ProductModels.ViewProductModel>
@using OECS.Models;
<div class="modal-header">
    <h5 class="modal-title">Gallery</h5>
    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
<div class="modal-body">
    <div class="container-fluid clearfix">
        <div class="gallery text-center">
            <input type="hidden" id="txtHidProductID" value="@ViewBag.ProductID" />
            <div class="previews">
                @{
                    oecsEntities dbContext = new oecsEntities();
                    int productID = Convert.ToInt32(ViewBag.ProductID);
                    var icon = dbContext.ProductImage
                                        .Where(i => i.ProductColor.ProductID == productID)
                                        .Select(i => new
                                        {
                                            i.IconID,
                                            i.ProductColor.ProductID,
                                            i.ProductColor.ColorID,
                                            i.Icon.icon1
                                        }).Distinct().ToList();

                    var defaultImg = "";
                    var isMainDisplay = "";
                    foreach (var img in Model.Where(p => p.ProductImage.path != "Images\\AddImageIcon\\add-image-icon.png"))
                    {
                        isMainDisplay = (img.ProductImage.isMainDisplay == true ? "main-display" : "");

                        if (img.ProductColor.isDisplay == true)
                        {
                            defaultImg = img.ProductImage.path;
                            <a class="selected default-img @isMainDisplay" productColorID="@img.ProductColor.ProductColorID" data-full="@defaultImg">
                                <img src="@defaultImg" />
                            </a>
                        }
                        else
                        {
                            <a class="img-link-wrapper @isMainDisplay" productColorID="@img.ProductColor.ProductColorID" data-full="@img.ProductImage.path">
                                <img src="@img.ProductImage.path" />
                            </a>
                        }
                    }
                }
            </div>
            <div class="full">
                <img src="@defaultImg" />
            </div>
        </div>
    </div>
    <div class="container">
        @foreach (var i in icon)
        {
            <a onclick="ViewProductPhotoGallery(parseInt(@i.ProductID), parseInt(@i.ColorID), parseInt(@i.IconID))">
                <img src="@i.icon1" class="img-fluid z-depth-1 rounded-circle img-thumbnail icon">
            </a>
        }
    </div>
</div>
<div class="modal-footer">
    <div class="btn-group" role="group" aria-label="Basic example">
        <button type="button" class="btn btn-primary" id="BtnSetUsDisplay">Set Us Display</button>
        <button type="button" class="btn btn-primary" id="BtnSetUsMainDisplay">Set Us Main Display</button>
        <button type="button" class="btn btn-primary" id="BtnSetUsBothDisplay">Both</button>
    </div>
    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
</div>
